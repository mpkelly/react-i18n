var e,t;e=this,t=function(e,t){"use strict";var r="default"in t?t.default:t;const n=(e,t)=>{const r=[];let n;const a=RegExp(e,"g");for(;null!==(n=a.exec(t));)r.push({offsets:[n.index,n.index+n[0].length],array:n});return r},a=(e,t)=>e.match.offsets[0]-t.match.offsets[0],o={pattern:/(\*\*|__)(.*?)\1/,onMatch:(e,t)=>r.createElement("strong",{key:t},e[2])},l={pattern:/(\*|_)(.*?)\1/,onMatch:(e,t)=>r.createElement("em",{key:t},e[2])},s={pattern:/~~(.*?)~~/,onMatch:(e,t)=>r.createElement("del",{key:t},e[1])},c={pattern:/`(.*?)`/,onMatch:(e,t)=>r.createElement("code",{key:t},e[1])},u={pattern:/\[([^\[]+)\]\(([^\)]+)\)/,onMatch:(e,t)=>r.createElement("a",{key:t,href:e[2]},e[1])},f=[o,l,c,s,u],i=t.createContext(void 0),h=()=>t.useContext(i),d=e=>{const{bundles:n,children:a,markdownRules:o,lang:l}=e,s=h();let c,u,f={},d=[];s&&(f=s.bundle,c=s.lang,u=s.resolveLanguageBundle,d=s.markdownRules);const p=(o||[]).filter(e=>!d.includes(e)).concat(d),[m,g]=t.useState(),y=l||c;if(!y)throw Error("No `lang` prop specified");t.useEffect(()=>{g(void 0)},[l]);const b=t.useCallback(e=>Promise.all([new Promise(t=>{f&&e===c?t(f):u?u(y).then(t):t({})}),new Promise(t=>{n&&n[e]?n[e]().then(t):t({})})]).then(e=>{let t={};return e.forEach(e=>{t=Object.assign(Object.assign({},t),e)}),t}),[y,c,f,n,u]);return t.useEffect(()=>{m||b(y).then(g)},[m,y,f,n,b]),m?r.createElement(i.Provider,{value:{resolveLanguageBundle:b,lang:y,bundle:m,markdownRules:p}},a):null};function p(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}d.defaultProps={markdownRules:f};e.BoldRule=o,e.DefaultMarkdownRules=f,e.I18NProvider=d,e.InlineCodeRule=c,e.ItalicRule=l,e.LinkRule=u,e.StrikethroughRule=s,e.findRegex=n,e.formatCurrency=(e,t,r={style:"currency"},n)=>new Intl.NumberFormat(n,Object.assign(Object.assign({},r),{currency:t})).format(e),e.formatDate=(e,t,r)=>new Intl.DateTimeFormat(r,t).format(e),e.pluralize=(e,t,r,n)=>{const a=new Intl.PluralRules(n).select(e);switch(a){case"one":return`${e} ${t}`;case"other":return`${e} ${r}`}throw Error(`Unable to match ${a}.`)},e.transform=(e,t)=>{if(!t.length)return[e];const r=[],o=[];let l=e;if(t.forEach(e=>{n(e.pattern,l).forEach(t=>{const r=Array.from({length:t.array[0].length}).map(()=>" ").join("");l=l.replace(t.array[0],r),o.push({match:t,rule:e})})}),l===e)return[e];l=e;let s=0;return o.sort(a).forEach((e,t)=>{const[n,a]=e.match.offsets,c=l.substring(s,n);if(c&&r.push(c),r.push(e.rule.onMatch(e.match.array,t)),s=a,t+1===o.length){const e=l.substring(s);e&&r.push(e)}}),r},e.useI18N=h,e.withI18N=function(e){return t.forwardRef((t,n)=>{const a=(e=>{let{i18n:t=""}=e,r=p(e,["i18n"]);if(!t)return e;const{bundle:n}=h();return(e=>"string"==typeof e?[{children:e}]:Array.isArray(e)?e:[e])(t).forEach(e=>{const{args:t=[]}=e,a=p(e,["args"]),o=Object.keys(a)[0],l=n[e[o]];l&&(r[o]="string"==typeof l?l:l(...t))}),r})(t);return r.createElement(e,Object.assign({},a,{ref:n}))})},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).ReactI18N={},e.React);
